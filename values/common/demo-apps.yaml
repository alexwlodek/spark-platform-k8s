image:
  repository: ghcr.io/alexwlodek/spark-demo-job
  tag: "latest"
  pullPolicy: IfNotPresent

sparkApplication:
  enabled: false

scheduledSparkApplications:
  - name: light
    schedule: "*/5 * * * *"
    concurrencyPolicy: Forbid
    successfulRunHistoryLimit: 2
    failedRunHistoryLimit: 2
    spark:
      arguments:
        - "100000"
  - name: heavy
    schedule: "*/30 * * * *"
    concurrencyPolicy: Forbid
    successfulRunHistoryLimit: 1
    failedRunHistoryLimit: 2
    spark:
      arguments:
        - "1000000"
      driver:
        memory: "1536m"
      executor:
        instances: 2
        memory: "1536m"

spark:
  sparkVersion: "3.5.2"
  type: Python
  mode: cluster
  pythonVersion: "3"
  mainApplicationFile: local:///opt/spark/work-dir/job.py
  arguments:
    - "500000"
  sparkConf:
    "spark.ui.prometheus.enabled": "true"
  timeToLiveSeconds: 7200
  imagePullSecrets: []
  restartPolicy:
    type: Never
  driver:
    cores: 1
    coreLimit: "1200m"
    memory: "1024m"
    serviceAccount: spark-operator-spark
    labels: {}
  executor:
    instances: 1
    cores: 1
    coreLimit: "1200m"
    memory: "1024m"
    deleteOnTermination: true
    labels: {}

metrics:
  podMonitor:
    enabled: true
    labels:
      release: kube-prometheus-stack
    interval: 15s
    scrapeTimeout: 10s

grafanaDashboard:
  enabled: true
